---
sidebar: auto
---
# webview H5 小结
18年6月开始接手webview的H5页面，项目从 jquery seajs 构建的多页面应用转型到 vue 构建的单页面应用，这一过程做个简单的小结
## 早期存在的问题
#### 以下简单描述jquery seajs所构建的多页面h5在webview中存在哪些问题

#### 1、无法保持上一个页面的状态
::: danger 包括但不限于
- 表单的交互数据

- 通过接口返回的结果集合

- 页面的滚动距离
:::

#### 2、页面跳转带来的空白
::: danger 例如
- webview打开h5页面实际上相当于在一个浏览器窗口中打开一个网页，在页面请求回来之前会空白，通过webview的loading可以规避第一次页面加载的空白态，如果再次跳转，页面就会在每次跳转时产生空白

- 基于上面一点，无法在跳转时给页面做转场动画
:::

#### 3、部分能力不足
::: danger 包括但不限于
- 使用ES6以及更高版本的js存在局限性

- jquery虽然已经将javascript简化了许多，但是依然不能很简便的应付复杂繁琐的功能页，当表单交互多，dom操作频繁时更为明显
:::

## 规避的措施与不足

#### 1、采取的措施
::: tip 例如
- 使用onhashchange方法，模拟单页面app，通过hash值变化显示隐藏div，手动记录页面的堆栈顺序，实现页面转场效果

- 引入单个vue.js文件，简化jquery编码
:::

#### 2、措施的不足
::: danger 例如
- 手动记录页面堆栈，堆栈多了难以维护，对于每个堆栈做相应的处理，代码量多且繁琐

- 所有的页面都暴露在同一个作用域之下，可以通过命名空间规避，但是不是最优选择
:::

## 解决方案
#### 1、为什么选择vue
::: tip 例如
- 完整的生态体系和生命周期

- 路由管理系统vue-router与状态管理系统vuex

- 配合webpack打包，一切皆模块，同时能够解锁众多前沿技术，如样式预编译、前缀自动补全、es6语法编译、自动压缩、按需引入等

- 页面模块化，具有独立的作用域，使用mixins进行类的组装

- 路由守卫，有效融入业务场景，决定页面的呈现与终止

- 自定义组件随意嵌套，slot插槽

- ……
:::

#### 2、解决与带来
::: tip 例如
- 解决jquery (获取dom->获取对象->设置属性) 的编程方式，取而代之的是双向绑定，有更强大的能力应对日渐复杂的功能

- 解决页面的切换与转场的流畅，保证了所有打开过的页面的状态，使之向原生app效果靠拢

- 带来更多场景的解决方案，使用包管理工具（yarn或npm）更加有效的管理包

- 带来更加自由的组件化编程，随意组合和封装可复用的组件

- ……
:::