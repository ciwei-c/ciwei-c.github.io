<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>c | webview H5 小结</title>
    <meta name="description" content="less is more">
    <link rel="icon" href="/logo.jpg">
  <link rel="stylesheet" href="/reset.css">
  <script src="/canvas.js" defer="defer"></script>
    
    <link rel="preload" href="/assets/css/0.styles.57c3dc38.css" as="style"><link rel="preload" href="/assets/js/app.78220875.js" as="script"><link rel="preload" href="/assets/js/24.2154cbf5.js" as="script"><link rel="prefetch" href="/assets/js/1.ecbe992f.js"><link rel="prefetch" href="/assets/js/2.a0e6db62.js"><link rel="prefetch" href="/assets/js/3.f7d409e8.js"><link rel="prefetch" href="/assets/js/4.0d11b927.js"><link rel="prefetch" href="/assets/js/5.832f5d01.js"><link rel="prefetch" href="/assets/js/6.52b0413d.js"><link rel="prefetch" href="/assets/js/7.c8f2c006.js"><link rel="prefetch" href="/assets/js/8.bd92f8e9.js"><link rel="prefetch" href="/assets/js/9.995b7255.js"><link rel="prefetch" href="/assets/js/10.d66ab377.js"><link rel="prefetch" href="/assets/js/11.d15dfb4c.js"><link rel="prefetch" href="/assets/js/12.4e3b299c.js"><link rel="prefetch" href="/assets/js/13.f563e5c1.js"><link rel="prefetch" href="/assets/js/14.72b49bb8.js"><link rel="prefetch" href="/assets/js/15.7eb10133.js"><link rel="prefetch" href="/assets/js/16.5db29f7a.js"><link rel="prefetch" href="/assets/js/17.470d415f.js"><link rel="prefetch" href="/assets/js/18.d362cb43.js"><link rel="prefetch" href="/assets/js/19.71593941.js"><link rel="prefetch" href="/assets/js/20.d6799ab7.js"><link rel="prefetch" href="/assets/js/21.f0740831.js"><link rel="prefetch" href="/assets/js/22.8ad2190c.js"><link rel="prefetch" href="/assets/js/23.061e2c4b.js"><link rel="prefetch" href="/assets/js/25.ec11b363.js"><link rel="prefetch" href="/assets/js/26.134390f2.js"><link rel="prefetch" href="/assets/js/27.33ac50f2.js"><link rel="prefetch" href="/assets/js/28.6b87e427.js"><link rel="prefetch" href="/assets/js/29.02851954.js"><link rel="prefetch" href="/assets/js/30.8484a556.js"><link rel="prefetch" href="/assets/js/31.9aa99839.js"><link rel="prefetch" href="/assets/js/32.610f6ca8.js"><link rel="prefetch" href="/assets/js/33.51b736ce.js"><link rel="prefetch" href="/assets/js/34.ad8ddef6.js"><link rel="prefetch" href="/assets/js/35.1a37229b.js"><link rel="prefetch" href="/assets/js/36.c39bc4ee.js"><link rel="prefetch" href="/assets/js/37.67efcd7c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57c3dc38.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      c
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">笔记</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/admin/fe/" class="nav-link router-link-active">Js&amp;Ts</a></li><li class="dropdown-item"><!----><a href="/admin/style/" class="nav-link">动画及样式</a></li><li class="dropdown-item"><!----><a href="/admin/more/" class="nav-link">其他</a></li></ul></div></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">笔记</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/admin/fe/" class="nav-link router-link-active">Js&amp;Ts</a></li><li class="dropdown-item"><!----><a href="/admin/style/" class="nav-link">动画及样式</a></li><li class="dropdown-item"><!----><a href="/admin/more/" class="nav-link">其他</a></li></ul></div></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>webview H5 小结</span><!----></p><ul class="sidebar-group-items"><li><a href="/admin/fe/h5.html#早期存在的问题" class="sidebar-link">早期存在的问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/admin/fe/h5.html#规避的措施与不足" class="sidebar-link">规避的措施与不足</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/admin/fe/h5.html#解决方案" class="sidebar-link">解决方案</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="webview-h5-小结"><a href="#webview-h5-小结" aria-hidden="true" class="header-anchor">#</a> webview H5 小结</h1><p>18年6月开始接手webview的H5页面，项目从 jquery seajs 构建的多页面应用转型到 vue 构建的单页面应用，这一过程做个简单的小结</p><h2 id="早期存在的问题"><a href="#早期存在的问题" aria-hidden="true" class="header-anchor">#</a> 早期存在的问题</h2><h4 id="以下简单描述jquery-seajs所构建的多页面h5在webview中存在哪些问题"><a href="#以下简单描述jquery-seajs所构建的多页面h5在webview中存在哪些问题" aria-hidden="true" class="header-anchor">#</a> 以下简单描述jquery seajs所构建的多页面h5在webview中存在哪些问题</h4><h4 id="_1、无法保持上一个页面的状态"><a href="#_1、无法保持上一个页面的状态" aria-hidden="true" class="header-anchor">#</a> 1、无法保持上一个页面的状态</h4><div class="danger custom-block"><p class="custom-block-title">包括但不限于</p><ul><li><p>表单的交互数据</p></li><li><p>通过接口返回的结果集合</p></li><li><p>页面的滚动距离</p></li></ul></div><h4 id="_2、页面跳转带来的空白"><a href="#_2、页面跳转带来的空白" aria-hidden="true" class="header-anchor">#</a> 2、页面跳转带来的空白</h4><div class="danger custom-block"><p class="custom-block-title">例如</p><ul><li><p>webview打开h5页面实际上相当于在一个浏览器窗口中打开一个网页，在页面请求回来之前会空白，通过webview的loading可以规避第一次页面加载的空白态，如果再次跳转，页面就会在每次跳转时产生空白</p></li><li><p>基于上面一点，无法在跳转时给页面做转场动画</p></li></ul></div><h4 id="_3、部分能力不足"><a href="#_3、部分能力不足" aria-hidden="true" class="header-anchor">#</a> 3、部分能力不足</h4><div class="danger custom-block"><p class="custom-block-title">包括但不限于</p><ul><li><p>使用ES6以及更高版本的js存在局限性</p></li><li><p>jquery虽然已经将javascript简化了许多，但是依然不能很简便的应付复杂繁琐的功能页，当表单交互多，dom操作频繁时更为明显</p></li></ul></div><h2 id="规避的措施与不足"><a href="#规避的措施与不足" aria-hidden="true" class="header-anchor">#</a> 规避的措施与不足</h2><h4 id="_1、采取的措施"><a href="#_1、采取的措施" aria-hidden="true" class="header-anchor">#</a> 1、采取的措施</h4><div class="tip custom-block"><p class="custom-block-title">例如</p><ul><li><p>使用onhashchange方法，模拟单页面app，通过hash值变化显示隐藏div，手动记录页面的堆栈顺序，实现页面转场效果</p></li><li><p>引入单个vue.js文件，简化jquery编码</p></li></ul></div><h4 id="_2、措施的不足"><a href="#_2、措施的不足" aria-hidden="true" class="header-anchor">#</a> 2、措施的不足</h4><div class="danger custom-block"><p class="custom-block-title">例如</p><ul><li><p>手动记录页面堆栈，堆栈多了难以维护，对于每个堆栈做相应的处理，代码量多且繁琐</p></li><li><p>所有的页面都暴露在同一个作用域之下，可以通过命名空间规避，但是不是最优选择</p></li></ul></div><h2 id="解决方案"><a href="#解决方案" aria-hidden="true" class="header-anchor">#</a> 解决方案</h2><h4 id="_1、为什么选择vue"><a href="#_1、为什么选择vue" aria-hidden="true" class="header-anchor">#</a> 1、为什么选择vue</h4><div class="tip custom-block"><p class="custom-block-title">例如</p><ul><li><p>完整的生态体系和生命周期</p></li><li><p>路由管理系统vue-router与状态管理系统vuex</p></li><li><p>配合webpack打包，一切皆模块，同时能够解锁众多前沿技术，如样式预编译、前缀自动补全、es6语法编译、自动压缩、按需引入等</p></li><li><p>页面模块化，具有独立的作用域，使用mixins进行类的组装</p></li><li><p>路由守卫，有效融入业务场景，决定页面的呈现与终止</p></li><li><p>自定义组件随意嵌套，slot插槽</p></li><li><p>……</p></li></ul></div><h4 id="_2、解决与带来"><a href="#_2、解决与带来" aria-hidden="true" class="header-anchor">#</a> 2、解决与带来</h4><div class="tip custom-block"><p class="custom-block-title">例如</p><ul><li><p>解决jquery (获取dom-&gt;获取对象-&gt;设置属性) 的编程方式，取而代之的是双向绑定，有更强大的能力应对日渐复杂的功能</p></li><li><p>解决页面的切换与转场的流畅，保证了所有打开过的页面的状态，使之向原生app效果靠拢</p></li><li><p>带来更多场景的解决方案，使用包管理工具（yarn或npm）更加有效的管理包</p></li><li><p>带来更加自由的组件化编程，随意组合和封装可复用的组件</p></li><li><p>……</p></li></ul></div></div><!----><!----></div></div></div>
    <script src="/assets/js/24.2154cbf5.js" defer></script><script src="/assets/js/app.78220875.js" defer></script>
  </body>
</html>
